spec_version: 1
kind: blueprint
metadata:
  description: >
    All in one deployment of our promotions manager
    
clouds: 
  - AWS: eu-central-1
  
artifacts:
  - movies-ui: movies-ui.zip
  - movies-api: movies-api.zip

inputs:
- PORT: 3000
- API_PORT: 3001
- AWS_INSTANCE_TYPE: t2.micro

applications:
  - movies-ui:
      #target: vm1
      #instance: 3
      input_values:

  - movies-api:      
      #target: vm1
      input_values:
        - API_PORT: $API_PORT
        - AWS_INSTANCE_TYPE: $AWS_INSTANCE_TYPE
        - DATABASE_HOST: mongodb

  - mongodb:
      #target: vm1
      input_values:
        - AWS_INSTANCE_TYPE: $AWS_INSTANCE_TYPE